# StaffInspector

StaffInspector is a simple REST service to maintain and update an 
employee database. The service will connect to a specified MongoDB 
database. Employees can be created, retrieved, updated, and deleted. 
All data is sent and retrieved in a JSON format.

### Dependencies

* JDK 7 or higher
* Maven

### Installing

To install simply run the following command:

	mvn install

Maven will install and test the service. However, if you wish to run 
the tests without rebuilding, you can run:

	mvn test

### Running

StaffInspector can be run by simply executing the command:

	mvn spring-boot:run

The above command will attempt to connect to a MongoDB server running 
on localhost (127.0.0.1) port 27017. It will connect using the user 
"admin" with an empty password. The database configured will be called 
"company".

The configuration above can be changed by specifying different Java 
options. The options are:

* com.company.si.hostname
* com.company.si.port
* com.company.si.database
* com.company.si.database.user
* com.company.si.database.password

An example follows:

	mvn spring-boot:run -Dcom.company.si.hostname="example.com" -Dcom.company.si.database.user="staffAdmin" -Dcom.company.si.database.password="password"

### Implementation

A collection called "staff" and "staffindex" will be created in the 
connected database. Staff is where all of the employee details will 
be stored. Staffindex is a special collection that keeps track of the 
employee ID numbers that have been handed out.

There are several fields available. Those fields are:

* employeeId
* firstname
* lastname
* middleinitial
* email
* phone
* position
* dateHired
* address
* active

The Employee ID is generated by StaffInspector during the creation. 

The Employee ID will always increment and not reuse an ID already 
handed out--even if that employee has been removed from the database.

### Using the REST Service

When StaffInspector is running, it will be listening on port 8080.
All REST functionality is handled by the /staff URI.

##### Creating Employees

To create an employee, an HTTP POST request must be sent to:

	http://www.example.com/staff

Where www.example.com is replaced with your hostname. JSON formatted 
content must be sent with the POST request. A content body is always 
required for POST requests. The application can only consume JSON so 
a content type of "application/json" must be present in the headers.

The JSON sent with the POST request can specify initial values for
each of the implemented fields (minus employeeId). However, it is 
perfectly acceptable to send empty JSON brackets: "{}".

Upon a successful creation, a status 200 code will be returned as 
the newly created Employee in a JSON format.

##### Retrieving Employees

There are 2 methods to retrieve an employee.

The first method is to send an HTTP GET request to:

	http://www.example.com/staff

Where www.example.com is replaced with your hostname.

This request will return a JSON array with every employee currently in 
the database.

The second method is to send an HTTP GET request to:

	http://www.example.com/staff/employeeId

Where www.example.com is replaced with your hostname and employeeId 
is replaced with the employee ID you wish to retrieve.

This request will return a single employee in JSON format.

Upon success retrieval, a status 200 code will be returned along with 
the retrieved employee(s) in JSON format. If an invalid employeeId is 
supplied, a status 404 code will be returned along with the error 
message in a JSON format.

##### Updating Employees

To create an employee, an HTTP PUT request must be sent to:

	http://www.example.com/staff/employeeId

Where www.example.com is replaced with your hostname and employeeId 
is replaced with the employee ID you wish to update. JSON formatted 
content must be sent with the PUT request. A content body is always 
required for PUT requests. The application can only consume JSON so 
a content type of "application/json" must be present in the headers.

The JSON sent with the PUT request specifies the fields you wish to 
update. Fields that you want to remain unchanged should be omitted 
from the JSON message.

Upon a successful update, a status 200 code will be returned along 
with the updated employee in JSON format. If an invalid employeeId 
is supplied, a status 404 code will be returned along with the error 
message in a JSON format.

##### Deleting Employees

To delete an employee, an HTTP DELETE request must be sent to:

	http://www.example.com/staff/employeeId

Where www.example.com is replaced with your hostname and employeeId 
is replaced with the employee ID you wish to update. No content 
should be sent with the DELETE request.

Upon a successful delete, a status 200 code will be returned along 
with the deleted employee in JSON format. If an invalid employeeId 
is supplied, a status 404 code will be returned along with the error 
message in a JSON format.

### Credits

Source code written by Brian Hession

Depends on the following libraries:

* Spring Data MongoDB
* Spring Boot Web
* MongoDB driver

Testing depends on the following libraries:

* JUnit
* Spring Boot Test
* Fongo
* NoSQLUnit MongoDB
